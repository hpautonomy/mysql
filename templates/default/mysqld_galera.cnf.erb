# mysql settings
binlog_format			=  ROW
default-storage-engine		=  innodb
innodb_autoinc_lock_mode	=  2
<% if node['mysql']['galera']['cluster']['enabled'] %>
innodb_doublewrite		=  1
#innodb_locks_unsafe_for_binlog	=  1
transaction-isolation		=  READ-COMMITTED
query_cache_size		=  0
query_cache_type		=  0
bind-address			=  0.0.0.0
<% else %>
#innodb_doublewrite		=  1
#transaction-isolation		=  READ-COMMITTED
#query_cache_size		=  0
#query_cache_type		=  0
#bind-address			=  0.0.0.0
<% end %>
<% if node['mysql']['implementation'] == 'mariadb' || node['mysql']['implementation'] == 'galera' %>

# mariadb thread-pooling
#thread_handling		= pool-of-threads # Appears to induce causality errors :(
#thread_pool_size		= <number of processors>
#thread_pool_stall_limit	= 500
#thread_pool_max_threads	= 500
#thread_pool_idle_timeout	= 60
#thread_pool_oversubscribe	= 3 # Internal parameter - change at your own risk!
<% end %>
